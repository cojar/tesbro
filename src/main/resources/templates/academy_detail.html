<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>academy_detail</title>
    <link rel="stylesheet" type="text/css" th:href="@{/style_academy.css}">
    <script src="/jquery-3.1.1.min.js"></script> <!-- 값 제어를 위해 jquery -->
    <link href="/datepicker.min.css" rel="stylesheet" type="text/css" media="all">
    <!-- Air datepicker css -->
    <script src="/datepicker.js"></script> <!-- Air datepicker js -->
    <script src="/datepicker.ko.js"></script>
</head>
<body>
<!--        이름이랑 정보 요약&찜/공유      -->
<div class="content">
    <a href="#top"><div class="top-btn">▲</div></a>
    <div class="teacher-popup">
        <div class="p-content">
            <div class="p-bg">
                <img src="https://cdn.pixabay.com/photo/2020/06/10/07/05/yoga-5281457_640.jpg" alt="teacher-pic">
                <div class="gradient"></div>
            </div>

            <div class="profile">
                <div class="profile-item" id="teacherNameDisplay"></div>
                <div class="profile-item" id="teacherIntroDisplay"></div>
            </div>

            <div class="profile-list">
                <div class="list-item">경력사항
                    <ul>
                        <li id="teacherQualifyDisplay"></li>
                    </ul>
                </div>
                <div class="list-item">수상내역
                    <ul>
                        <li id="teacherAwardsDisplay"></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="academy-top">
        <div class="academy-logo">
            <img class="imglog" th:src="${academy.imgLogo}" alt="academy-logo">
        </div>
        <div class="atop-items">
            <p class="academy_name" th:text="${academy.academyName}"></p>
            <p class="academy_Address" th:text="${academy.academyAddress}"></p>
                <a href="#">지도보기</a></p>
            <p th:text="${academy.academyTel}"></p>
        </div>
        <div class="besides">
            <a href="#"><img src="https://cdn-icons-png.flaticon.com/128/1358/1358023.png" alt="share-icon"></a>
            <a href="#"><img src="https://cdn-icons-png.flaticon.com/128/1077/1077035.png" alt="like-icon"></a>
        </div>
    </div>




    <div class="academy-mid">

        <!--        학원 메인 이미지 & 예약하기      -->
        <div class="academy-mid-1">
            <div class="mid1-photo">
                <div id="img-slide">
                    <div class="album">
                        <div class="images">
                            <div class="image"><img src="https://cdn.pixabay.com/photo/2017/05/25/15/08/jogging-2343558_1280.jpg" alt="">
                            </div>
                            <div class="image"><img src="https://cdn.pixabay.com/photo/2018/02/06/14/07/ease-3134828_640.jpg" alt=""></div>
                            <div class="image"><img src="https://cdn.pixabay.com/photo/2018/01/01/01/56/yoga-3053487_640.jpg" alt=""></div>
                            <div class="image"><img src="https://cdn.pixabay.com/photo/2016/11/18/14/15/woman-1834827_640.jpg" alt=""></div>
                        </div>
                        <button class="prev">◀</button>
                        <button class="next">▶</button>
                    </div>
                </div>
            </div>

            <div class="reservation">
                <div class="calender">
                    <p><input type="text" id="datepicker"></p>
                </div>

                <select class="s-class">
                    <option value="">수업선택</option>
                    <option value="강의1">강의1</option>
                    <option value="강의2">강의2</option>
                    <option value="강의3">강의3</option>
                </select>


                <select class="s-ticket">
                    <option value="">수강권선택</option>
                    <option value="프리미엄">프리미엄</option>
                    <option value="고급">고급</option>
                    <option value="일반">일반</option>
                </select>

                <button class="btn-r">예약하기</button>
            </div>
        </div>


        <!--        강사리스트 구간      -->
        <div class ="academy-mid-2">
            <div class="teachers">강사리스트</div>
            <div class="teachers">
                <div id="t-slide">
                    <div class="t-album">
                        <div class="t-images">
                            <div class="t-image" th:each="teacher, index : ${academy.teacherList}">
                                <a onclick="getTeacherId(this)">
                                    <img src="https://cdn.pixabay.com/photo/2016/06/06/17/05/woman-1439909_640.jpg" alt="teacherPic">
                                    <div th:text="${teacher.teacherName}"></div>
                                    <input type="hidden" th:value="${teacher.teacherName}" id="teacherName"/>
                                    <input type="hidden" th:value="${teacher.introduction}" id="teacherIntro"/>
                                    <input type="hidden" th:value="${teacher.qualifications}" id="teacherQualify"/>
                                    <input type="hidden" th:value="${teacher.awards}" id="teacherAwards"/>
                                </a>
                            </div>
                        </div>
                        <button class="t-prev">◀</button>
                        <button class="t-next">▶</button>
                    </div>
                </div>


            </div>
        </div>

        <!--        학원 상세정보 구간      -->
        <div class ="academy-mid-3">
            <div class="detail-btn">
                <a href="#학원소개">학원소개</a>
                <a href="#수업정보">수업정보</a>
                <a href="#취소환불">취소/환불 규정(?)</a>
                <a href="#후기">후기</a>
            </div>
            <div class="detail-contents">
                <div id="학원소개" class="d-content">
                    <p>학원소개</p>
                    <p th:text="${academy.introduction}"></p>
                </div>
                <div id="수업정보" class="d-content">
                    <p>수업정보</p>
                </div>
                <div id="취소환불" class="d-content">
                    <p>취소/환불 규정</p>
                </div>
                <div id="후기" class="d-content">
                    <p>후기</p>
                    <div class="review_box">
                        <div class="review-size" th:text="|${#lists.size(academy.reviewList)}개의 답변이 있습니다.|"></div>
                        <ul class="review-items" th:each="review : ${academy.reviewList}">
                            <li>
                                <div th:text="${review.userId}"></div>
                                <div th:text="${review.star_rating}"></div>
                                <div th:text="${#temporals.format(review.createDate, 'yyyy-MM-dd HH:mm')}"></div>
                                <div th:text="${review.content}"></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!--같은 동 다른 학원 목록. 이전 목록으로 가기 등등-->
    <div class="academy-btm">
        <div id="map" style="width:500px;height:300px;"></div>
    </div>
</div>



<script th:src="@{/academy.js}"></script>
<script>
    $("#datepicker").datepicker({
    	language: 'ko'
    });

    function getTeacherId(element) {
    var teacherName = element.querySelector('#teacherName').value;
    var teacherIntro = element.querySelector('#teacherIntro').value;
    var teacherQualify = element.querySelector('#teacherQualify').value;
    var teacherAwards = element.querySelector('#teacherAwards').value;


    document.getElementById('teacherNameDisplay').textContent = teacherName;
    document.getElementById('teacherIntroDisplay').textContent = teacherIntro;
    var teacherQualifyDisplay = document.getElementById('teacherQualifyDisplay');
    if (teacherQualifyDisplay) {
        teacherQualifyDisplay.textContent = teacherQualify;
    }
    var teacherAwardsDisplay = document.getElementById('teacherAwardsDisplay');
    if (teacherAwardsDisplay) {
        teacherAwardsDisplay.textContent = teacherAwards;
    }
}
</script>
</body>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=794a40541300254bb5698381e1789213&libraries=services"></script>
<script>
var mapContainer = document.getElementById('map'), // 지도를 표시할 div
    mapOption = {
        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };

// 지도를 생성합니다
var map = new kakao.maps.Map(mapContainer, mapOption);

// 주소-좌표 변환 객체를 생성합니다
var geocoder = new kakao.maps.services.Geocoder();

// 주소로 좌표를 검색합니다
var address = document.querySelector('.academy_Address').innerText;
geocoder.addressSearch(address, function(result, status) {

    // 정상적으로 검색이 완료됐으면
     if (status === kakao.maps.services.Status.OK) {

        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

        // 결과값으로 받은 위치를 마커로 표시합니다

        var marker = new kakao.maps.Marker({
            map: map,
            position: coords
        });

        // 인포윈도우로 장소에 대한 설명을 표시합니다
        var infowindow = new kakao.maps.InfoWindow({
            content: '<div style="width:150px;text-align:center;padding:6px 0;">' + document.querySelector('.academy_name').innerText + '</div>'
        });
        infowindow.open(map, marker);

        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
        map.setCenter(coords);
    }
});
</script>
</html>